<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="catv1.Views.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:catv1.ViewModels"
    Title="Login"
    BackgroundColor="#0F172A"
    Shell.NavBarIsVisible="False">

    <ContentPage.BindingContext>
        <vm:LoginViewModel />
    </ContentPage.BindingContext>

    <Grid>
        <!--  Background Decoration  -->
        <BoxView
            CornerRadius="500"
            HeightRequest="500"
            HorizontalOptions="End"
            Opacity="0.1"
            TranslationX="100"
            TranslationY="-200"
            VerticalOptions="Start"
            WidthRequest="500"
            Color="#1E293B" />

        <BoxView
            CornerRadius="300"
            HeightRequest="300"
            HorizontalOptions="Start"
            Opacity="0.05"
            TranslationX="-100"
            TranslationY="100"
            VerticalOptions="End"
            WidthRequest="300"
            Color="#3B82F6" />

        <Grid Padding="30" RowDefinitions="Auto, *">

            <!--  Header  -->
            <VerticalStackLayout
                Grid.Row="0"
                Margin="0,40,0,0"
                Spacing="10">
                <Border
                    BackgroundColor="#1E293B"
                    HeightRequest="60"
                    HorizontalOptions="Center"
                    Stroke="#334155"
                    StrokeShape="RoundRectangle 30"
                    StrokeThickness="1"
                    WidthRequest="60">
                    <Label
                        FontSize="30"
                        HorizontalOptions="Center"
                        Text="ðŸŽ“"
                        VerticalOptions="Center" />
                </Border>
                <Label
                    FontAttributes="Bold"
                    FontSize="24"
                    HorizontalOptions="Center"
                    Text="Smart Attendance"
                    TextColor="White" />
                <Label
                    FontSize="14"
                    HorizontalOptions="Center"
                    Text="University Access Portal"
                    TextColor="#94A3B8" />
            </VerticalStackLayout>

            <!--  Login Card  -->
            <Border
                Grid.Row="1"
                Margin="0,40,0,0"
                Padding="30"
                BackgroundColor="#1E293B"
                Stroke="#334155"
                StrokeShape="RoundRectangle 20"
                StrokeThickness="1"
                VerticalOptions="Start">
                <Border.Shadow>
                    <Shadow
                        Brush="Black"
                        Opacity="0.3"
                        Radius="30"
                        Offset="0,10" />
                </Border.Shadow>

                <VerticalStackLayout Spacing="20">
                    <!--  Role Switcher  -->
                    <Border
                        Padding="4"
                        BackgroundColor="#0F172A"
                        Stroke="Transparent"
                        StrokeShape="RoundRectangle 10">
                        <Grid ColumnDefinitions="*,*">
                            <Button
                                x:Name="BtnStudent"
                                BackgroundColor="{Binding StudentBtnBgColor}"
                                Command="{Binding StudentCommand}"
                                CornerRadius="8"
                                FontAttributes="Bold"
                                FontSize="14"
                                HeightRequest="40"
                                Text="Student"
                                TextColor="{Binding StudentBtnTextColor}" />
                            <Button
                                x:Name="BtnLecturer"
                                Grid.Column="1"
                                BackgroundColor="{Binding LecturerBtnBgColor}"
                                Command="{Binding LecturerCommand}"
                                CornerRadius="8"
                                FontAttributes="Bold"
                                FontSize="14"
                                HeightRequest="40"
                                Text="Lecturer"
                                TextColor="{Binding LecturerBtnTextColor}" />
                        </Grid>
                    </Border>

                    <!--  Title & Description  -->
                    <VerticalStackLayout Spacing="5">
                        <Label
                            x:Name="LblWelcomeTitle"
                            FontAttributes="Bold"
                            FontSize="20"
                            HorizontalOptions="Center"
                            Text="{Binding WelcomeTitle}"
                            TextColor="White" />
                        <Label
                            FontSize="13"
                            HorizontalOptions="Center"
                            Text="Please enter your details to continue."
                            TextColor="#94A3B8" />
                    </VerticalStackLayout>

                    <!--  Input Fields  -->
                    <VerticalStackLayout Spacing="15">
                        <!--  ID Field  -->
                        <VerticalStackLayout Spacing="8">
                            <Label
                                x:Name="LblIdField"
                                FontAttributes="Bold"
                                FontSize="12"
                                Text="{Binding IdFieldLabel}"
                                TextColor="#CBD5E1" />
                            <Border
                                BackgroundColor="#0F172A"
                                HeightRequest="50"
                                Stroke="#334155"
                                StrokeShape="RoundRectangle 8"
                                StrokeThickness="1">
                                <Grid ColumnDefinitions="50, *">
                                    <Label
                                        FontFamily="Arial"
                                        FontSize="18"
                                        HorizontalOptions="Center"
                                        Text="ðŸ†”"
                                        TextColor="#64748B"
                                        VerticalOptions="Center" />
                                    <Entry
                                        x:Name="EntryId"
                                        Grid.Column="1"
                                        Placeholder="{Binding IdPlaceholder}"
                                        PlaceholderColor="#475569"
                                        Text="{Binding IdText}"
                                        TextColor="White"
                                        VerticalOptions="Center" />
                                </Grid>
                            </Border>
                        </VerticalStackLayout>

                        <!--  Password Field  -->
                        <VerticalStackLayout Spacing="8">
                            <Label
                                FontAttributes="Bold"
                                FontSize="12"
                                Text="PASSWORD"
                                TextColor="#CBD5E1" />
                            <Border
                                BackgroundColor="#0F172A"
                                HeightRequest="50"
                                Stroke="#334155"
                                StrokeShape="RoundRectangle 8"
                                StrokeThickness="1">
                                <Grid ColumnDefinitions="50, *, 50">
                                    <Label
                                        FontFamily="Arial"
                                        FontSize="18"
                                        HorizontalOptions="Center"
                                        Text="ðŸ”’"
                                        TextColor="#64748B"
                                        VerticalOptions="Center" />
                                    <Entry
                                        x:Name="EntryPassword"
                                        Grid.Column="1"
                                        IsPassword="{Binding IsPassword}"
                                        Placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        PlaceholderColor="#475569"
                                        Text="{Binding PasswordText}"
                                        TextColor="White"
                                        VerticalOptions="Center" />
                                    <Label
                                        Grid.Column="2"
                                        FontFamily="Arial"
                                        FontSize="18"
                                        HeightRequest="40"
                                        HorizontalTextAlignment="Center"
                                        Text="ðŸ‘ï¸"
                                        TextColor="#64748B"
                                        VerticalTextAlignment="Center"
                                        WidthRequest="40">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding TogglePasswordCommand}" />
                                        </Label.GestureRecognizers>
                                    </Label>
                                </Grid>
                            </Border>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                    <!--  Options  -->
                    <Grid ColumnDefinitions="Auto, *">
                        <HorizontalStackLayout Spacing="10">
                            <HorizontalStackLayout.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding RememberMeCommand}" />
                            </HorizontalStackLayout.GestureRecognizers>
                            <!--  Custom Checkbox Look  -->
                            <Border
                                BackgroundColor="#0F172A"
                                HeightRequest="20"
                                Stroke="#3B82F6"
                                StrokeShape="RoundRectangle 4"
                                StrokeThickness="1"
                                WidthRequest="20">
                                <Label
                                    x:Name="LblRememberMeCheck"
                                    FontSize="14"
                                    HorizontalOptions="Center"
                                    IsVisible="{Binding IsRememberMe}"
                                    Text="âœ“"
                                    TextColor="#3B82F6"
                                    VerticalOptions="Center" />
                            </Border>
                            <Label
                                FontSize="13"
                                Text="Remember me"
                                TextColor="#94A3B8"
                                VerticalOptions="Center" />
                        </HorizontalStackLayout>
                        <Label
                            Grid.Column="1"
                            FontSize="13"
                            HorizontalOptions="End"
                            Text="Forgot Password?"
                            TextColor="#3B82F6"
                            VerticalOptions="Center">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}" />
                            </Label.GestureRecognizers>
                        </Label>
                    </Grid>

                    <!--  Action Button  -->
                    <Button
                        BackgroundColor="#3B82F6"
                        Command="{Binding LoginCommand}"
                        CornerRadius="10"
                        FontAttributes="Bold"
                        FontSize="16"
                        HeightRequest="55"
                        Text="Log In"
                        TextColor="White">
                        <Button.Shadow>
                            <Shadow
                                Brush="#3B82F6"
                                Opacity="0.4"
                                Radius="10"
                                Offset="0,4" />
                        </Button.Shadow>
                    </Button>

                    <!--  Footer  -->
                    <Label
                        FontSize="13"
                        HorizontalOptions="Center"
                        VerticalOptions="Center">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="New here? " TextColor="#94A3B8" />
                                <Span
                                    FontAttributes="Bold"
                                    Text="Create Account"
                                    TextColor="#3B82F6">
                                    <Span.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SignUpCommand}" />
                                    </Span.GestureRecognizers>
                                </Span>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                </VerticalStackLayout>
            </Border>

            <Label
                Grid.Row="1"
                Margin="0,0,0,20"
                FontSize="11"
                HorizontalOptions="Center"
                Text="Version 1.0 â€¢ Secure &amp; Fast"
                TextColor="#475569"
                VerticalOptions="End" />

        </Grid>
    </Grid>
</ContentPage>